function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}function formatParams(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function getXMLHttpRequest(){var e,t,n;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=progIds[t];try{e=new ActiveXObject(n)}catch(e){}if(e){progIds=[n];break}}else if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;return e}function ajax(e){e=e||{},e.type=(e.type||"get").toUpperCase(),e.dataType=e.dataType||"json",e.async=!1!==e.async;var t=this.formatParams(e.data),n=getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState){var t=n.status;if(t>=200&&t<300||304===t){var i=n.responseText;if("json"===e.dataType.toLowerCase())try{i=JSON.parse(n.responseText)}catch(t){return void(e.fail&&e.fail("404",e.callbackParam))}e.success&&e.success(i,n.responseXML,e.callbackParam)}else e.fail&&e.fail(t,e.callbackParam)}};var i=t?"?"+t:"";"GET"===e.type?(n.open("GET",e.url+i,e.async,e.username,e.password),n.send(null)):"POST"===e.type&&(n.open("POST",e.url,e.async,e.username,e.password),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t))}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isNum(e){return null!=e&&""!=e&&!isNaN(e)}function isInteger(e){return!!isNum(e)&&e%1==0}function isString(e){return"[object String]"===Object.prototype.toString.call(e)}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function _initWeb(){options={url:"assets/data/"+configFile+".json?t="+Date.parse(new Date),success:function(e){jsonRouter=e,config={baseUrl:"assets/js",paths:e.framework,shim:e.shim};for(var t in e.module)for(var n in e.module[t]){var i=n+t,r=e.module[t][n];config.paths[i]=r}for(var t in e.template)config.paths[t]=e.template[t];for(var o in e.reverse){var a=e.reverse[o];for(var t in a){var s=a[t],c=config.shim[s];if(isArray(c))-1===c.indexOf(o)&&config.shim[s].push(o);else if(c&&isObject(c)){var u=c.deps;u?-1===u.indexOf(o)&&config.shim[s].deps.push(o):config.shim[s].deps=[o]}else config.shim[s]=[o]}}for(var t in e.empty)define(t,e.empty[t],function(e){return e});require.config(config),routerSwitch?require([entry,"handlebars"],function(t,n){document.body.style.display="";var i,r=e.entry||"dashboard";t&&"function"==typeof t.initFirst&&t.initFirst.call(t,r);for(var o in e.module)Q.reg(o,function(e){i&&(require(["_"+i],function(e){e&&"function"==typeof e.dispose&&e.dispose.call(e,i)}),t&&"function"==typeof t.disposeContent&&t.disposeContent.call(t,i)),require(["html!!"+e,"_"+e],function(r,o){var a=n.compile(r)((o||{}).data||{});$("#container").html(a),i=e,o&&"function"==typeof o.init&&o.init.call(o,i),t&&"function"==typeof t.initContent&&t.initContent.call(t,i)})});Q.init({index:r})}):require([entry],function(e){document.body.style.display="",e&&"function"==typeof e.init&&e.init.call(e,entry)})},fail:function(e){alert("加载配置文件错误!")}},document.body.style.display="none",ajax({url:"assets/data/config.json?t="+Date.parse(new Date),success:function(e){jsonConfig=e,ajax(options)},fail:function(e){alert("加载配置文件错误!")}})}var progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],config,jsonConfig,jsonRouter,configFile="modules",routerSwitch=!0,entry="app";eachReverse(document.getElementsByTagName("script"),function(e){return!!e.getAttribute("data-main")&&("false"===e.getAttribute("data-router")&&(routerSwitch=!1),e.getAttribute("data-entry")&&(entry=e.getAttribute("data-entry")),e.getAttribute("data-config")&&(configFile=e.getAttribute("data-config")),!0)});var options={};_initWeb();