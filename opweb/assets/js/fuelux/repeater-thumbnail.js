!function(e){"function"==typeof define&&define.amd?define(["jquery","fuelux/repeater"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("./repeater")):e(jQuery)}(function(e){function t(t,n){for(var i=!1;!i&&n.search("{{")>=0;)!function(){var a,s,r;s=n.indexOf("{{"),a=n.indexOf("}}",s+2),s>-1&&a>-1?(r=e.trim(n.substring(s+2,a)),r=void 0!==t[r]?t[r]:"",n=n.substring(0,s)+r+n.substring(a+2)):i=!0}();return n}e.fn.repeater&&(e.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},e.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var t=[];return this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){t.push(e(this))}),t},e.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(t,n){function i(){if(u===t[r].index)return l=e(this),!1;u++}function a(){l=e(this),l.is(t[r].selector)&&s(l,t[r].selected)}function s(e,t){t=void 0===t||t,t?(n||"multi"===o||d.thumbnail_clearSelectedItems(),e.addClass("selected")):e.removeClass("selected")}var r,l,c,u,o=this.viewOptions.thumbnail_selectable,d=this;for(e.isArray(t)||(t=[t]),c=!0===n||"multi"===o?t.length:o&&t.length>0?1:0,r=0;r<c;r++)void 0!==t[r].index?(l=e(),u=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(i),l.length>0&&s(l,t[r].selected)):t[r].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(a)},e.fn.repeater.defaults=e.extend({},e.fn.repeater.defaults,{thumbnail_alignment:"left",thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_noItemsHTML:"no items found",thumbnail_selectable:!1,thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'}),e.fn.repeater.viewTypes.thumbnail={selected:function(){var e,t=this.viewOptions.thumbnail_infiniteScroll;t&&(e="object"==typeof t?t:{},this.infiniteScrolling(!0,e))},before:function(t){var n,i,a=this.viewOptions.thumbnail_alignment,s=this.$canvas.find(".repeater-thumbnail-cont"),r=t.data,l={};return s.length<1?(s=e('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>'),a&&"none"!==a?(i={center:1,justify:1,left:1,right:1},a=i[a]?a:"justify",s.addClass("align-"+a),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,l.item=s):l.action="none",r.items&&r.items.length<1?(n=e('<div class="empty"></div>'),n.append(this.viewOptions.thumbnail_noItemsHTML),s.append(n)):s.find(".empty:first").remove(),l},renderItem:function(n){var i=this.viewOptions.thumbnail_selectable,a=this,s=e(t(n.subset[n.index],this.viewOptions.thumbnail_template));return s.data("item_data",n.data.items[n.index]),i&&(s.addClass("selectable"),s.on("click",function(){a.isDisabled||(s.hasClass("selected")?(s.removeClass("selected"),a.$element.trigger("deselected.fu.repeaterThumbnail",s)):("multi"!==i&&a.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var t=e(this);t.removeClass("selected"),a.$element.trigger("deselected.fu.repeaterThumbnail",t)}),s.addClass("selected"),a.$element.trigger("selected.fu.repeaterThumbnail",s)))})),n.container.append(s),this.thumbnail_injectSpacers&&s.after('<span class="spacer">&nbsp;</span>'),this.viewOptions.thumbnail_itemRendered&&this.viewOptions.thumbnail_itemRendered({container:n.container,item:s,itemData:n.subset[n.index]},function(){}),!1}})});