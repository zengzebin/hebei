!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var i=t.fn.spinbox,s=function(i,s){this.$element=t(i),this.$element.find(".btn").on("click",function(t){t.preventDefault()}),this.options=t.extend({},t.fn.spinbox.defaults,s),this.options.step=this.$element.data("step")||this.options.step,this.options.value<this.options.min?this.options.value=this.options.min:this.options.max<this.options.value&&(this.options.value=this.options.max),this.$input=this.$element.find(".spinbox-input"),this.$input.on("focusout.fu.spinbox",this.$input,t.proxy(this.change,this)),this.$element.on("keydown.fu.spinbox",this.$input,t.proxy(this.keydown,this)),this.$element.on("keyup.fu.spinbox",this.$input,t.proxy(this.keyup,this)),this.options.hold?(this.$element.on("mousedown.fu.spinbox",".spinbox-up",t.proxy(function(){this.startSpin(!0)},this)),this.$element.on("mouseup.fu.spinbox",".spinbox-up, .spinbox-down",t.proxy(this.stopSpin,this)),this.$element.on("mouseout.fu.spinbox",".spinbox-up, .spinbox-down",t.proxy(this.stopSpin,this)),this.$element.on("mousedown.fu.spinbox",".spinbox-down",t.proxy(function(){this.startSpin(!1)},this))):(this.$element.on("click.fu.spinbox",".spinbox-up",t.proxy(function(){this.step(!0)},this)),this.$element.on("click.fu.spinbox",".spinbox-down",t.proxy(function(){this.step(!1)},this))),this.switches={count:1,enabled:!0},"medium"===this.options.speed?this.switches.speed=300:"fast"===this.options.speed?this.switches.speed=100:this.switches.speed=500,this.options.defaultUnit=e(this.options.defaultUnit,this.options.units)?this.options.defaultUnit:"",this.unit=this.options.defaultUnit,this.lastValue=this.options.value,this.render(),this.options.disabled&&this.disable()},n=function(t,i){return Math.round(t/i)*i},e=function(i,s){var n=!1,e=i.toLowerCase();return t.each(s,function(t,i){if(i=i.toLowerCase(),e===i)return n=!0,!1}),n},o=function(t){return isNaN(parseFloat(t))?t:(t>this.options.max?t=this.options.cycle?this.options.min:this.options.max:t<this.options.min&&(t=this.options.cycle?this.options.max:this.options.min),this.options.limitToStep&&this.options.step&&(t=n(t,this.options.step),t>this.options.max?t-=this.options.step:t<this.options.min&&(t+=this.options.step)),t)};s.prototype={constructor:s,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){t(this).attr("value",t(this).val())}),this.$element[0].outerHTML},render:function(){this.setValue(this.getDisplayValue())},change:function(){this.setValue(this.getDisplayValue()),this.triggerChangedEvent()},stopSpin:function(){void 0!==this.switches.timeout&&(clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent())},triggerChangedEvent:function(){var t=this.getValue();t!==this.lastValue&&(this.lastValue=t,this.$element.trigger("changed.fu.spinbox",t))},startSpin:function(i){if(!this.options.disabled){var s=this.switches.count;1===s?(this.step(i),s=1):s=s<3?1.5:s<8?2.5:4,this.switches.timeout=setTimeout(t.proxy(function(){this.iterate(i)},this),this.switches.speed/s),this.switches.count++}},iterate:function(t){this.step(t),this.startSpin(t)},step:function(t){this.setValue(this.getDisplayValue());var i;i=t?this.options.value+this.options.step:this.options.value-this.options.step,i=i.toFixed(5),this.setValue(i+this.unit)},getDisplayValue:function(){var t=this.parseInput(this.$input.val());return t||this.options.value},setDisplayValue:function(t){this.$input.val(t)},getValue:function(){var t=this.options.value;return"."!==this.options.decimalMark&&(t=(t+"").split(".").join(this.options.decimalMark)),t+this.unit},setValue:function(t){if("."!==this.options.decimalMark&&(t=this.parseInput(t)),"number"!=typeof t){var i=t.replace(/[0-9.-]/g,"");this.unit=e(i,this.options.units)?i:this.options.defaultUnit}var s=this.getIntValue(t);return isNaN(s)&&!isFinite(s)?this.setValue(this.options.value):(s=o.call(this,s),this.options.value=s,t=s+this.unit,"."!==this.options.decimalMark&&(t=(t+"").split(".").join(this.options.decimalMark)),this.setDisplayValue(t),this)},value:function(t){return t||0===t?this.setValue(t):this.getValue()},parseInput:function(t){return t=(t+"").split(this.options.decimalMark).join(".")},getIntValue:function(t){if(void 0!==(t=void 0===t?this.getValue():t))return"string"==typeof t&&(t=this.parseInput(t)),t=parseFloat(t,10)},disable:function(){this.options.disabled=!0,this.$element.addClass("disabled"),this.$input.attr("disabled",""),this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1,this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$element.find("button").removeClass("disabled")},keydown:function(t){var i=t.keyCode;38===i?this.step(!0):40===i?this.step(!1):13===i&&this.change()},keyup:function(t){var i=t.keyCode;38!==i&&40!==i||this.triggerChangedEvent()}},t.fn.spinbox=function(i){var n,e=Array.prototype.slice.call(arguments,1),o=this.each(function(){var o=t(this),p=o.data("fu.spinbox"),h="object"==typeof i&&i;p||o.data("fu.spinbox",p=new s(this,h)),"string"==typeof i&&(n=p[i].apply(p,e))});return void 0===n?o:n},t.fn.spinbox.defaults={value:0,min:0,max:999,step:1,hold:!0,speed:"medium",disabled:!1,cycle:!1,units:[],decimalMark:".",defaultUnit:"",limitToStep:!1},t.fn.spinbox.Constructor=s,t.fn.spinbox.noConflict=function(){return t.fn.spinbox=i,this},t(document).on("mousedown.fu.spinbox.data-api","[data-initialize=spinbox]",function(i){var s=t(i.target).closest(".spinbox");s.data("fu.spinbox")||s.spinbox(s.data())}),t(function(){t("[data-initialize=spinbox]").each(function(){var i=t(this);i.data("fu.spinbox")||i.spinbox(i.data())})})});