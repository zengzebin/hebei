!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=t.fn.combobox,i=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.combobox.defaults,i),this.$dropMenu=this.$element.find(".dropdown-menu"),this.$input=this.$element.find("input"),this.$button=this.$element.find(".btn"),this.$inputGroupBtn=this.$element.find(".input-group-btn"),this.$element.on("click.fu.combobox","a",t.proxy(this.itemclicked,this)),this.$element.on("change.fu.combobox","input",t.proxy(this.inputchanged,this)),this.$element.on("shown.bs.dropdown",t.proxy(this.menuShown,this)),this.$input.on("keyup.fu.combobox",t.proxy(this.keypress,this)),this.setDefaultSelection(),0===this.$dropMenu.children("li").length&&this.$button.addClass("disabled"),this.options.filterOnKeypress&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this)};i.prototype={constructor:i,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){t(this).attr("value",t(this).val())}),this.$element[0].outerHTML},doSelect:function(t){void 0!==t[0]?(this.$element.find("li.selected:first").removeClass("selected"),this.$selectedItem=t,this.$selectedItem.addClass("selected"),this.$input.val(this.$selectedItem.text().trim())):(this.$selectedItem=null,this.$element.find("li.selected:first").removeClass("selected"))},clearSelection:function(){this.$selectedItem=null,this.$input.val(""),this.$dropMenu.find("li").removeClass("selected")},menuShown:function(){this.options.autoResizeMenu&&this.resizeMenu()},resizeMenu:function(){var t=this.$element.outerWidth();this.$dropMenu.outerWidth(t)},selectedItem:function(){var e=this.$selectedItem,i={};if(e){var n=this.$selectedItem.text().trim();i=t.extend({text:n},this.$selectedItem.data())}else i={text:this.$input.val().trim(),notFound:!0};return i},selectByText:function(e){var i=t([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||t(this).text()||"").trim().toLowerCase()===(e||"").trim().toLowerCase())return i=t(this),!1}),this.doSelect(i)},selectByValue:function(t){var e='li[data-value="'+t+'"]';this.selectBySelector(e)},selectByIndex:function(t){var e="li:eq("+t+")";this.selectBySelector(e)},selectBySelector:function(t){var e=this.$element.find(t);this.doSelect(e)},setDefaultSelection:function(){var t="li[data-selected=true]:first",e=this.$element.find(t);e.length>0&&(this.selectBySelector(t),e.removeData("selected"),e.removeAttr("data-selected"))},enable:function(){this.$element.removeClass("disabled"),this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$input.attr("disabled",!0),this.$button.addClass("disabled")},itemclicked:function(e){this.$selectedItem=t(e.target).parent(),this.$input.val(this.$selectedItem.text().trim()).trigger("change",{synthetic:!0});var i=this.selectedItem();this.$element.trigger("changed.fu.combobox",i),e.preventDefault(),this.$element.find(".dropdown-toggle").focus()},keypress:function(t){var e=38===t.which||40===t.which||37===t.which||39===t.which;if(this.options.showOptionsOnKeypress&&!this.$inputGroupBtn.hasClass("open")&&(this.$button.dropdown("toggle"),this.$input.focus()),13===t.which){t.preventDefault();var i=this.$dropMenu.find("li.selected").text().trim();i.length>0?this.selectByText(i):this.selectByText(this.$input.val()),this.$inputGroupBtn.removeClass("open")}else if(27===t.which)t.preventDefault(),this.clearSelection(),this.$inputGroupBtn.removeClass("open");else if(this.options.showOptionsOnKeypress&&(40===t.which||38===t.which)){t.preventDefault();var n=this.$dropMenu.find("li.selected");n.length>0&&(n=40===t.which?n.next(":not(.hidden)"):n.prev(":not(.hidden)")),0===n.length&&(n=40===t.which?this.$dropMenu.find("li:not(.hidden):first"):this.$dropMenu.find("li:not(.hidden):last")),this.doSelect(n)}this.options.filterOnKeypress&&!e&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this),this.previousKeyPress=t.which},inputchanged:function(e,i){var n=t(e.target).val();if(i&&i.synthetic)return void this.selectByText(n);this.selectByText(n);var s=this.selectedItem();0===s.text.length&&(s={text:n}),this.$element.trigger("changed.fu.combobox",s)}},i.prototype.getValue=i.prototype.selectedItem,t.fn.combobox=function(e){var n,s=Array.prototype.slice.call(arguments,1),o=this.each(function(){var o=t(this),l=o.data("fu.combobox"),h="object"==typeof e&&e;l||o.data("fu.combobox",l=new i(this,h)),"string"==typeof e&&(n=l[e].apply(l,s))});return void 0===n?o:n},t.fn.combobox.defaults={autoResizeMenu:!0,filterOnKeypress:!1,showOptionsOnKeypress:!1,filter:function(e,i,n){var s=0;n.$dropMenu.find(".empty-indicator").remove(),e.each(function(e){var n=t(this),o=t(this).text().trim();n.removeClass(),o===i?(n.addClass("text-success"),s++):o.substr(0,i.length)===i?(n.addClass("text-info"),s++):n.addClass("hidden")}),0===s&&n.$dropMenu.append('<li class="empty-indicator text-muted"><em>No Matches</em></li>')}},t.fn.combobox.Constructor=i,t.fn.combobox.noConflict=function(){return t.fn.combobox=e,this},t(document).on("mousedown.fu.combobox.data-api","[data-initialize=combobox]",function(e){var i=t(e.target).closest(".combobox");i.data("fu.combobox")||i.combobox(i.data())}),t(function(){t("[data-initialize=combobox]").each(function(){var e=t(this);e.data("fu.combobox")||e.combobox(e.data())})})});