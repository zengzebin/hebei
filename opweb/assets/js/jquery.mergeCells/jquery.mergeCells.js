!function(t){var n=[],r=[];t.fn.mergeCols=function(o,s,a){if("number"==typeof o&&(o=[o]),s){var h=this;r=[],n=[];var c=t(e(s),h);t.each(o,function(){r.push(t(e(this),h))}),t.each(c,function(r){"none"!=t(this).css("display")&&n.push(r)}),t.each(r,function(){i(this,a)})}else{var h=this;r=[],n=[],t.each(o,function(){r.push(t(e(this),h))}),t.each(r,function(){i(this,a)})}},t.fn.mergeRecover=function(n){t.each(t(this).find("tbody>tr>td"),function(){"none"==t(this).css("display")&&t(this).remove()}),t.each(t(this).find("tbody>tr"),function(n){t.each(t(this).find("td"),function(n){var r=Number(t(this).attr("colspan"))||1;if(r>1)for(var e=0;e<r-1;e++){var i=t(this).clone(!0).removeAttr("colspan").removeAttr("rowspan");t(this).after(i),i.addClass("hide")}})});for(var r=t.map(t(this).find("tbody>tr"),function(n,r){return t(n).find("td").length}),e=Math.max.apply(null,r),i=t(this).find("tbody>tr").length,o=0;o<e;o++)for(var s=0;s<i;s++){var a=t(this).find("tbody>tr:nth-child("+(s+1)+")>td:nth-child("+(o+1)+")"),h=Number(a.attr("rowspan"))||1;if(h>1)for(var c=0;c<h-1;c++){var f=a.clone(!0).removeAttr("colspan").removeAttr("rowspan"),d=t(this).find("tbody>tr:nth-child("+(s+c+2)+")>td:nth-child("+(o+1)+")");d.before(f),f.addClass("hide")}}n||t.each(t(this).find("tbody>tr>td"),function(){t(this).removeAttr("colspan").removeAttr("rowspan").removeClass("hide")})},t.fn.mergeRemove=function(){t.each(t(this).find("tbody>tr>td"),function(){"none"==t(this).css("display")&&t(this).remove()})},t.fn.recoverCols=function(n){var r=this;"number"==typeof n&&(n=[n]),t.each(n,function(){t(e(this),r).removeAttr("colspan").removeAttr("rowspan").removeClass("hide")})};var e=function(t){return"tbody>tr>td:nth-child("+t+")"},i=function(r,e){var i=function(t,n){return t==n};"function"==typeof e&&(i=e);for(var o=r.length-1,s=1;o>=0;o--){var a=t(r[o]);0==o?a.attr("rowspan",s):t.inArray(o,n)>=0||!i.call(this,r.get(o).innerText,r.get(o-1).innerText)?(a.attr("rowspan",s),s=1):(a.addClass("hide"),s++)}}}(jQuery);