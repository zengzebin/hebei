!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){"use strict";var e=t.getOptions(),n=e.plotOptions,i=t.seriesTypes,a=t.merge,o=function(){},r=t.each;n.funnel=a(n.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),i.funnel=t.extendClass(i.pie,{type:"funnel",animate:o,translate:function(){var t,e,n,i,a,s,l,p,c,h,d,u=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this,y=g.chart,b=g.options,m=b.reversed,v=b.ignoreHiddenPoint,C=y.plotWidth,L=y.plotHeight,k=0,w=b.center,H=u(w[0],C),W=u(w[1],L),A=u(b.width,C),Y=u(b.height,L),x=u(b.neckWidth,C),O=u(b.neckHeight,L),P=W-Y/2+Y-O,T=g.data,X="left"===b.dataLabels.position?1:0;g.getWidthAt=e=function(t){var e=W-Y/2;return t>P||Y===O?x:x+(A-x)*(1-(t-e)/(Y-O))},g.getX=function(t,n){return H+(n?-1:1)*(e(m?2*W-t:t)/2+b.dataLabels.distance)},g.center=[H,W,Y],g.centerX=H,r(T,function(t){v&&!1===t.visible||(f+=t.y)}),r(T,function(r){d=null,i=f?r.y/f:0,s=W-Y/2+k*Y,c=s+i*Y,t=e(s),a=H-t/2,l=a+t,t=e(c),p=H-t/2,h=p+t,s>P?(a=p=H-x/2,l=h=H+x/2):c>P&&(d=c,t=e(P),p=H-t/2,h=p+t,c=P),m&&(s=2*W-s,c=2*W-c,d=d?2*W-d:null),n=["M",a,s,"L",l,s,h,c],d&&n.push(h,d,p,d),n.push(p,c,"Z"),r.shapeType="path",r.shapeArgs={d:n},r.percentage=100*i,r.plotX=H,r.plotY=(s+(d||c))/2,r.tooltipPos=[H,r.plotY],r.slice=o,r.half=X,v&&!1===r.visible||(k+=i)})},drawPoints:function(){var t,e,n,i=this,a=i.chart,o=a.renderer;r(i.data,function(a){n=a.graphic,e=a.shapeArgs,t=a.pointAttr[a.selected?"select":""],n?n.attr(t).animate(e):a.graphic=o.path(e).attr(t).add(i.group)})},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,n,a,o,r=this.data,s=this.options.dataLabels.distance,l=r.length;for(this.center[2]-=2*s;l--;)n=r[l],t=n.half,e=t?1:-1,o=n.plotY,a=this.getX(o,t),n.labelPos=[0,o,a+(s-5)*e,o,a+s*e,o,t?"right":"left",0];i.pie.prototype.drawDataLabels.call(this)}}),e.plotOptions.pyramid=t.merge(e.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),t.seriesTypes.pyramid=t.extendClass(t.seriesTypes.funnel,{type:"pyramid"})});