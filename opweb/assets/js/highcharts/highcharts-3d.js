!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){function i(t,i,e,s){return{x:s.cosB*t-s.sinB*e,y:-s.sinA*s.sinB*t+s.cosA*i-s.cosB*s.sinA*e,z:s.cosA*s.sinB*t+s.sinA*i+s.cosA*s.cosB*e}}function e(t,i,e){var s=e>0&&e<Number.POSITIVE_INFINITY?e/(t.z+i.z+e):1;return{x:t.x*s,y:t.y*s}}function s(t){return void 0!==t&&null!==t}function r(t){var i,e,s=0;for(i=0;i<t.length;i++)e=(i+1)%t.length,s+=t[i].x*t[e].y-t[e].x*t[i].y;return s/2}function a(t){var i,e=0;for(i=0;i<t.length;i++)e+=t[i].z;return t.length?e/t.length:0}function o(t,i,e,s,r,a,n,h){var p=[];if(a>r&&a-r>f/2+1e-4)p=p.concat(o(t,i,e,s,r,r+f/2,n,h)),p=p.concat(o(t,i,e,s,r+f/2,a,n,h));else if(a<r&&r-a>f/2+1e-4)p=p.concat(o(t,i,e,s,r,r-f/2,n,h)),p=p.concat(o(t,i,e,s,r-f/2,a,n,h));else{var c=a-r;p=["C",t+e*g(r)-e*A*c*z(r)+n,i+s*z(r)+s*A*c*g(r)+h,t+e*g(a)+e*A*c*z(a)+n,i+s*z(a)-s*A*c*g(a)+h,t+e*g(a)+n,i+s*z(a)+h]}return p}function n(t,i){var e,s=t.plotLeft,r=t.plotWidth+s,a=t.plotTop,o=t.plotHeight+a,n=s+t.plotWidth/2,h=a+t.plotHeight/2,p={minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE},l=1;return e=[{x:s,y:a,z:0},{x:s,y:a,z:i}],c([0,1],function(t){e.push({x:r,y:e[t].y,z:e[t].z})}),c([0,1,2,3],function(t){e.push({x:e[t].x,y:o,z:e[t].z})}),e=v(e,t,!1),c(e,function(t){p.minX=Math.min(p.minX,t.x),p.maxX=Math.max(p.maxX,t.x),p.minY=Math.min(p.minY,t.y),p.maxY=Math.max(p.maxY,t.y)}),s>p.minX&&(l=Math.min(l,1-Math.abs((s+n)/(p.minX+n))%1)),r<p.maxX&&(l=Math.min(l,(r-n)/(p.maxX-n))),a>p.minY&&(l=p.minY<0?Math.min(l,(a+h)/(-p.minY+a+h)):Math.min(l,1-(a+h)/(p.minY+h)%1)),o<p.maxY&&(l=Math.min(l,Math.abs((o-h)/(p.maxY-h)))),l}function h(i){if(this.chart.is3d()){var e=this.chart.options.plotOptions.column.grouping;void 0===e||e||void 0===this.group.zIndex||this.zIndexSet||(this.group.attr({zIndex:10*this.group.zIndex}),this.zIndexSet=!0);var r=this.options,a=this.options.states;this.borderWidth=r.borderWidth=s(r.edgeWidth)?r.edgeWidth:1,t.each(this.data,function(i){if(null!==i.y){var e=i.pointAttr;this.borderColor=t.pick(r.edgeColor,e[""].fill),e[""].stroke=this.borderColor,e.hover.stroke=t.pick(a.hover.edgeColor,this.borderColor),e.select.stroke=t.pick(a.select.edgeColor,this.borderColor)}})}i.apply(this,[].slice.call(arguments,1))}var p=t.animObject,c=t.each,l=t.extend,d=t.inArray,u=t.merge,y=t.pick,x=t.wrap,f=Math.PI,m=f/180,z=Math.sin,g=Math.cos,b=Math.round,v=t.perspective=function(s,r,a){var o=r.options.chart.options3d,n=!!a&&r.inverted,h={x:r.plotWidth/2,y:r.plotHeight/2,z:o.depth/2,vd:y(o.depth,1)*y(o.viewDistance,0)},p=r.scale3d||1,c=m*o.beta*(n?-1:1),l=m*o.alpha*(n?-1:1),d={cosA:g(l),cosB:g(-c),sinA:z(l),sinB:z(-c)};return a||(h.x+=r.plotLeft,h.y+=r.plotTop),t.map(s,function(t){var s=i((n?t.y:t.x)-h.x,(n?t.x:t.y)-h.y,(t.z||0)-h.z,d),r=e(s,h,h.vd);return r.x=r.x*p+h.x,r.y=r.y*p+h.y,r.z=s.z*p+h.z,{x:n?r.y:r.x,y:n?r.x:r.y,z:r.z}})},A=4*(Math.sqrt(2)-1)/3/(f/2);t.SVGRenderer.prototype.toLinePath=function(i,e){var s=[];return t.each(i,function(t){s.push("L",t.x,t.y)}),i.length&&(s[0]="M",e&&s.push("Z")),s},t.SVGRenderer.prototype.cuboid=function(i){var e=this.g(),r=this.cuboidPath(i);return e.front=this.path(r[0]).attr({zIndex:r[3],"stroke-linejoin":"round"}).add(e),e.top=this.path(r[1]).attr({zIndex:r[4],"stroke-linejoin":"round"}).add(e),e.side=this.path(r[2]).attr({zIndex:r[5],"stroke-linejoin":"round"}).add(e),e.fillSetter=function(i){var e=i,s=t.Color(i).brighten(.1).get(),r=t.Color(i).brighten(-.1).get();return this.front.attr({fill:e}),this.top.attr({fill:s}),this.side.attr({fill:r}),this.color=i,this},e.opacitySetter=function(t){return this.front.attr({opacity:t}),this.top.attr({opacity:t}),this.side.attr({opacity:t}),this},e.attr=function(i){if(!i.shapeArgs&&!s(i.x))return t.SVGElement.prototype.attr.call(this,i);var e=i.shapeArgs||i,r=this.renderer.cuboidPath(e);return this.front.attr({d:r[0],zIndex:r[3]}),this.top.attr({d:r[1],zIndex:r[4]}),this.side.attr({d:r[2],zIndex:r[5]}),this},e.animate=function(i,e,r){if(s(i.x)&&s(i.y)){var a=this.renderer.cuboidPath(i);this.front.attr({zIndex:a[3]}).animate({d:a[0]},e,r),this.top.attr({zIndex:a[4]}).animate({d:a[1]},e,r),this.side.attr({zIndex:a[5]}).animate({d:a[2]},e,r),this.attr({zIndex:-a[6]})}else i.opacity?(this.front.animate(i,e,r),this.top.animate(i,e,r),this.side.animate(i,e,r)):t.SVGElement.prototype.animate.call(this,i,e,r);return this},e.destroy=function(){return this.front.destroy(),this.top.destroy(),this.side.destroy(),null},e.attr({zIndex:-r[6]}),e},t.SVGRenderer.prototype.cuboidPath=function(i){function e(t){return u[t]}var s=i.x,o=i.y,n=i.z,h=i.height,p=i.width,c=i.depth,l=t.charts[this.chartIndex],d=t.map,u=[{x:s,y:o,z:n},{x:s+p,y:o,z:n},{x:s+p,y:o+h,z:n},{x:s,y:o+h,z:n},{x:s,y:o+h,z:n+c},{x:s+p,y:o+h,z:n+c},{x:s+p,y:o,z:n+c},{x:s,y:o,z:n+c}];u=v(u,l,i.insidePlotArea);var y=function(t,i){var s=[];return t=d(t,e),i=d(i,e),r(t)<0?s=t:r(i)<0&&(s=i),s},x=[3,2,1,0],f=[7,6,5,4],m=y(x,f),z=[1,6,7,0],g=[4,5,2,3],b=y(z,g),A=[1,2,5,6],w=[0,7,4,3],k=y(A,w);return[this.toLinePath(m,!0),this.toLinePath(b,!0),this.toLinePath(k,!0),a(m),a(b),a(k),9e9*a(d(g,e))]},t.SVGRenderer.prototype.arc3d=function(i){function e(t){var i=!1,e={};for(var s in t)-1!==d(s,a)&&(e[s]=t[s],delete t[s],i=!0);return!!i&&e}var s=this.g(),r=s.renderer,a=["x","y","r","innerR","start","end"];return i=u(i),i.alpha*=m,i.beta*=m,s.top=r.path(),s.side1=r.path(),s.side2=r.path(),s.inn=r.path(),s.out=r.path(),s.onAdd=function(){var t=s.parentGroup;s.top.add(s),s.out.add(t),s.inn.add(t),s.side1.add(t),s.side2.add(t)},s.setPaths=function(t){var i=s.renderer.arc3dPath(t),e=100*i.zTop;s.attribs=t,s.top.attr({d:i.top,zIndex:i.zTop}),s.inn.attr({d:i.inn,zIndex:i.zInn}),s.out.attr({d:i.out,zIndex:i.zOut}),s.side1.attr({d:i.side1,zIndex:i.zSide1}),s.side2.attr({d:i.side2,zIndex:i.zSide2}),s.zIndex=e,s.attr({zIndex:e}),t.center&&(s.top.setRadialReference(t.center),delete t.center)},s.setPaths(i),s.fillSetter=function(i){var e=t.Color(i).brighten(-.1).get();return this.fill=i,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:i}),this},c(["opacity","translateX","translateY","visibility"],function(t){s[t+"Setter"]=function(t,i){s[i]=t,c(["out","inn","side1","side2","top"],function(e){s[e].attr(i,t)})}}),x(s,"attr",function(t,i,r){var a;return"object"==typeof i&&(a=e(i))&&(l(s.attribs,a),s.setPaths(s.attribs)),t.call(this,i,r)}),x(s,"animate",function(t,i,s,r){var a,o,n,h=this.attribs;return delete i.center,delete i.z,delete i.depth,delete i.alpha,delete i.beta,n=p(y(s,this.renderer.globalAnimation)),n.duration&&(i=u(i),(a=e(i))&&(o=a,n.step=function(t,i){function e(t){return h[t]+(y(o[t],h[t])-h[t])*i.pos}i.elem.setPaths(u(h,{x:e("x"),y:e("y"),r:e("r"),innerR:e("innerR"),start:e("start"),end:e("end")}))})),t.call(this,i,s,r)}),s.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),t.SVGElement.prototype.destroy.call(this)},s.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},s.show=function(){this.top.show(),this.out.show(),this.inn.show(),this.side1.show(),this.side2.show()},s},t.SVGRenderer.prototype.arc3dPath=function(t){function i(t){return t%=2*f,t>f&&(t=2*f-t),t}var e=t.x,s=t.y,r=t.start,a=t.end-1e-5,n=t.r,h=t.innerR,p=t.depth,c=t.alpha,l=t.beta,d=g(r),u=z(r),y=g(a),x=z(a),m=n*g(l),b=n*g(c),v=h*g(l),A=h*g(c),w=p*z(l),k=p*z(c),M=["M",e+m*d,s+b*u];M=M.concat(o(e,s,m,b,r,a,0,0)),M=M.concat(["L",e+v*y,s+A*x]),M=M.concat(o(e,s,v,A,a,r,0,0)),M=M.concat(["Z"]);var P=l>0?f/2:0,L=c>0?0:f/2,S=r>-P?r:a>-P?-P:r,I=a<f-L?a:r<f-L?f-L:a,C=2*f-L,T=["M",e+m*g(S),s+b*z(S)];T=T.concat(o(e,s,m,b,S,I,0,0)),a>C&&r<C?(T=T.concat(["L",e+m*g(I)+w,s+b*z(I)+k]),T=T.concat(o(e,s,m,b,I,C,w,k)),T=T.concat(["L",e+m*g(C),s+b*z(C)]),T=T.concat(o(e,s,m,b,C,a,0,0)),T=T.concat(["L",e+m*g(a)+w,s+b*z(a)+k]),T=T.concat(o(e,s,m,b,a,C,w,k)),T=T.concat(["L",e+m*g(C),s+b*z(C)]),T=T.concat(o(e,s,m,b,C,I,0,0))):a>f-L&&r<f-L&&(T=T.concat(["L",e+m*g(I)+w,s+b*z(I)+k]),T=T.concat(o(e,s,m,b,I,a,w,k)),T=T.concat(["L",e+m*g(a),s+b*z(a)]),T=T.concat(o(e,s,m,b,a,I,0,0))),T=T.concat(["L",e+m*g(I)+w,s+b*z(I)+k]),T=T.concat(o(e,s,m,b,I,S,w,k)),T=T.concat(["Z"]);var Y=["M",e+v*d,s+A*u];Y=Y.concat(o(e,s,v,A,r,a,0,0)),Y=Y.concat(["L",e+v*g(a)+w,s+A*z(a)+k]),Y=Y.concat(o(e,s,v,A,a,r,w,k)),Y=Y.concat(["Z"]);var X=["M",e+m*d,s+b*u,"L",e+m*d+w,s+b*u+k,"L",e+v*d+w,s+A*u+k,"L",e+v*d,s+A*u,"Z"],V=["M",e+m*y,s+b*x,"L",e+m*y+w,s+b*x+k,"L",e+v*y+w,s+A*x+k,"L",e+v*y,s+A*x,"Z"],W=Math.atan2(k,-w),Z=Math.abs(a+W),F=Math.abs(r+W),R=Math.abs((r+a)/2+W);Z=i(Z),F=i(F),R=i(R);var O=1e5*R,G=1e5*F,B=1e5*Z;return{top:M,zTop:1e5*f+1,out:T,zOut:Math.max(O,G,B),inn:Y,zInn:Math.max(O,G,B),side1:X,zSide1:.99*B,side2:V,zSide2:.99*G}},t.Chart.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},t.wrap(t.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))}),t.getOptions().chart.options3d={enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,frame:{bottom:{size:1,color:"rgba(255,255,255,0)"},side:{size:1,color:"rgba(255,255,255,0)"},back:{size:1,color:"rgba(255,255,255,0)"}}},t.wrap(t.Chart.prototype,"init",function(i){var e,s,r=[].slice.call(arguments,1);r[0].chart&&r[0].chart.options3d&&r[0].chart.options3d.enabled&&(r[0].chart.options3d.alpha=(r[0].chart.options3d.alpha||0)%360,r[0].chart.options3d.beta=(r[0].chart.options3d.beta||0)%360,e=r[0].plotOptions||{},s=e.pie||{},s.borderColor=t.pick(s.borderColor,void 0)),i.apply(this,r)}),t.wrap(t.Chart.prototype,"setChartSize",function(t){var i=this,e=i.options.chart.options3d;if(t.apply(i,[].slice.call(arguments,1)),i.is3d()){var s=i.inverted,r=i.clipBox,a=i.margin,o=s?"y":"x",h=s?"x":"y",p=s?"height":"width",c=s?"width":"height";r[o]=-(a[3]||0),r[h]=-(a[0]||0),r[p]=i.chartWidth+(a[3]||0)+(a[1]||0),r[c]=i.chartHeight+(a[0]||0)+(a[2]||0),i.scale3d=1,!0===e.fitToPlot&&(i.scale3d=n(i,e.depth))}}),t.wrap(t.Chart.prototype,"redraw",function(t){this.is3d()&&(this.isDirtyBox=!0),t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.Chart.prototype,"renderSeries",function(t){var i,e=this.series.length;if(this.is3d())for(;e--;)i=this.series[e],i.translate(),i.render();else t.call(this)}),t.Chart.prototype.retrieveStacks=function(i){var e,s=this.series,r={},a=1;return t.each(this.series,function(t){e=y(t.options.stack,i?0:s.length-1-t.index),r[e]?r[e].series.push(t):(r[e]={series:[t],position:a},a++)}),r.totalStacks=a+1,r},t.wrap(t.Axis.prototype,"setOptions",function(i,e){var s;i.call(this,e),this.chart.is3d()&&(s=this.options,s.tickWidth=t.pick(s.tickWidth,0),s.gridLineWidth=t.pick(s.gridLineWidth,1))}),t.wrap(t.Axis.prototype,"render",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this.chart,e=i.renderer,s=i.options.chart.options3d,r=s.frame,a=r.bottom,o=r.back,n=r.side,h=s.depth,p=this.height,c=this.width,l=this.left,d=this.top;if(!this.isZAxis)if(this.horiz){var u={x:l,y:d+(i.xAxis[0].opposite?-a.size:p),z:0,width:c,height:a.size,depth:h,insidePlotArea:!1};this.bottomFrame?this.bottomFrame.animate(u):this.bottomFrame=e.cuboid(u).attr({fill:a.color,zIndex:i.yAxis[0].reversed&&s.alpha>0?4:-1}).css({stroke:a.color}).add()}else{var y={x:l+(i.yAxis[0].opposite?0:-n.size),y:d+(i.xAxis[0].opposite?-a.size:0),z:h,width:c+n.size,height:p+a.size,depth:o.size,insidePlotArea:!1};this.backFrame?this.backFrame.animate(y):this.backFrame=e.cuboid(y).attr({fill:o.color,zIndex:-3}).css({stroke:o.color}).add();var x={x:l+(i.yAxis[0].opposite?c:-n.size),y:d+(i.xAxis[0].opposite?-a.size:0),z:0,width:n.size,height:p+a.size,depth:h,insidePlotArea:!1};this.sideFrame?this.sideFrame.animate(x):this.sideFrame=e.cuboid(x).attr({fill:n.color,zIndex:-2}).css({stroke:n.color}).add()}}}),t.wrap(t.Axis.prototype,"getPlotLinePath",function(t){var i=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return i;if(null===i)return i;var e=this.chart,s=e.options.chart.options3d,r=this.isZAxis?e.plotWidth:s.depth,a=this.opposite;this.horiz&&(a=!a);var o=[this.swapZ({x:i[1],y:i[2],z:a?r:0}),this.swapZ({x:i[1],y:i[2],z:r}),this.swapZ({x:i[4],y:i[5],z:r}),this.swapZ({x:i[4],y:i[5],z:a?0:r})];return o=v(o,this.chart,!1),i=this.chart.renderer.toLinePath(o,!1)}),t.wrap(t.Axis.prototype,"getLinePath",function(t){return this.chart.is3d()?[]:t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.Axis.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d())return t.apply(this,[].slice.call(arguments,1));var i=arguments,e=i[1],s=i[2],r=this.getPlotLinePath(s),a=this.getPlotLinePath(e);return a&&r?a.push("L",r[10],r[11],"L",r[7],r[8],"L",r[4],r[5],"L",r[1],r[2]):a=null,a}),t.wrap(t.Tick.prototype,"getMarkPath",function(t){var i=t.apply(this,[].slice.call(arguments,1));if(!this.axis.chart.is3d())return i;var e=[this.axis.swapZ({x:i[1],y:i[2],z:0}),this.axis.swapZ({x:i[4],y:i[5],z:0})];return e=v(e,this.axis.chart,!1),i=["M",e[0].x,e[0].y,"L",e[1].x,e[1].y]}),t.wrap(t.Tick.prototype,"getLabelPosition",function(t){var i=t.apply(this,[].slice.call(arguments,1));return this.axis.chart.is3d()&&(i=v([this.axis.swapZ({x:i.x,y:i.y,z:0})],this.axis.chart,!1)[0]),i}),t.wrap(t.Axis.prototype,"getTitlePosition",function(t){var i,e,s=this.chart.is3d();return s&&(e=this.axisTitleMargin,this.axisTitleMargin=0),i=t.apply(this,[].slice.call(arguments,1)),s&&(i=v([this.swapZ({x:i.x,y:i.y,z:0})],this.chart,!1)[0],i[this.horiz?"y":"x"]+=(this.horiz?1:-1)*(this.opposite?-1:1)*e,this.axisTitleMargin=e),i}),t.wrap(t.Axis.prototype,"drawCrosshair",function(t){var i=arguments;this.chart.is3d()&&i[2]&&(i[2]={plotX:i[2].plotXold||i[2].plotX,plotY:i[2].plotYold||i[2].plotY}),t.apply(this,[].slice.call(i,1))}),t.Axis.prototype.swapZ=function(t,i){if(this.isZAxis){var e=i?0:this.chart.plotLeft,s=this.chart;return{x:e+(s.yAxis[0].opposite?t.z:s.xAxis[0].width-t.z),y:t.y,z:t.x-e}}return t};var w=t.ZAxis=function(){this.isZAxis=!0,this.init.apply(this,arguments)};t.extend(w.prototype,t.Axis.prototype),t.extend(w.prototype,{setOptions:function(i){i=t.merge({offset:0,lineWidth:0},i),t.Axis.prototype.setOptions.call(this,i),this.coll="zAxis"},setAxisSize:function(){t.Axis.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var i=this,e=i.chart;i.hasVisibleSeries=!1,i.dataMin=i.dataMax=i.ignoreMinPadding=i.ignoreMaxPadding=null,i.buildStacks&&i.buildStacks(),t.each(i.series,function(t){if(t.visible||!e.options.chart.ignoreHiddenSeries){var s,r=t.options,a=r.threshold;i.hasVisibleSeries=!0,i.isLog&&a<=0&&(a=null),s=t.zData,s.length&&(i.dataMin=Math.min(y(i.dataMin,s[0]),Math.min.apply(null,s)),i.dataMax=Math.max(y(i.dataMax,s[0]),Math.max.apply(null,s)))}})}}),t.wrap(t.Chart.prototype,"getAxes",function(i){var e=this,s=this.options,r=s.zAxis=t.splat(s.zAxis||{});i.call(this),e.is3d()&&(this.zAxis=[],t.each(r,function(t,i){t.index=i,t.isX=!0,new w(e,t).setScale()}))}),t.wrap(t.seriesTypes.column.prototype,"translate",function(i){if(i.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var e=this,s=e.chart,r=e.options,a=r.depth||25,o=r.stacking?r.stack||0:e._i,n=o*(a+(r.groupZPadding||1));!1!==r.grouping&&(n=0),n+=r.groupZPadding||1,t.each(e.data,function(t){if(null!==t.y){var i=t.shapeArgs,e=t.tooltipPos;t.shapeType="cuboid",i.z=n,i.depth=a,i.insidePlotArea=!0,e=v([{x:e[0],y:e[1],z:n}],s,!0)[0],t.tooltipPos=[e.x,e.y]}}),e.z=n}}),t.wrap(t.seriesTypes.column.prototype,"animate",function(i){if(this.chart.is3d()){var e=arguments,s=e[1],r=this.yAxis,a=this,o=this.yAxis.reversed;t.svg&&(s?t.each(a.data,function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,o||(t.stackY?t.shapeArgs.y=t.plotY+r.translate(t.stackY):t.shapeArgs.y=t.plotY+(t.negative?-t.height:t.height)))}):(t.each(a.data,function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,a.options.animation))}),this.drawDataLabels(),a.animate=null))}else i.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.column.prototype,"init",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this.options,e=i.grouping,s=i.stacking,r=y(this.yAxis.options.reversedStacks,!0),a=0;if(void 0===e||e){var o,n=this.chart.retrieveStacks(s),h=i.stack||0;for(o=0;o<n[h].series.length&&n[h].series[o]!==this;o++);a=10*(n.totalStacks-n[h].position)+(r?o:-o),this.xAxis.reversed||(a=10*n.totalStacks-a)}i.zIndex=a}}),t.wrap(t.Series.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&("column"===this.type||"columnrange"===this.type)){var i=this,e=i.chart,s=arguments,r=s[4],a={x:r.x,y:r.y,z:i.z};a=v([a],e,!0)[0],r.x=a.x,r.y=a.y}t.apply(this,[].slice.call(arguments,1))}),t.seriesTypes.columnrange&&t.wrap(t.seriesTypes.columnrange.prototype,"drawPoints",h),t.wrap(t.seriesTypes.column.prototype,"drawPoints",h),t.wrap(t.seriesTypes.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this,e=i.chart,s=e.options,r=i.options,a=r.depth||0,o=s.chart.options3d,n=o.alpha,h=o.beta,p=r.stacking?(r.stack||0)*a:i._i*a;p+=a/2,!1!==r.grouping&&(p=0),c(i.data,function(t){var e,s=t.shapeArgs;t.shapeType="arc3d",s.z=p,s.depth=.75*a,s.alpha=n,s.beta=h,s.center=i.center,e=(s.end+s.start)/2,t.slicedTranslation={translateX:b(g(e)*r.slicedOffset*g(n*m)),translateY:b(z(e)*r.slicedOffset*g(n*m))}})}}),t.wrap(t.seriesTypes.pie.prototype.pointClass.prototype,"haloPath",function(t){var i=arguments;return this.series.chart.is3d()?[]:t.call(this,i[1])}),t.wrap(t.seriesTypes.pie.prototype,"drawPoints",function(i){var e=this.options,s=e.states;this.chart.is3d()&&(this.borderWidth=e.borderWidth=e.edgeWidth||1,this.borderColor=e.edgeColor=t.pick(e.edgeColor,e.borderColor,void 0),s.hover.borderColor=t.pick(s.hover.edgeColor,this.borderColor),s.hover.borderWidth=t.pick(s.hover.edgeWidth,this.borderWidth),s.select.borderColor=t.pick(s.select.edgeColor,this.borderColor),s.select.borderWidth=t.pick(s.select.edgeWidth,this.borderWidth),c(this.data,function(t){var i=t.pointAttr;i[""].stroke=t.series.borderColor||t.color,i[""]["stroke-width"]=t.series.borderWidth,i.hover.stroke=s.hover.borderColor,i.hover["stroke-width"]=s.hover.borderWidth,i.select.stroke=s.select.borderColor,i.select["stroke-width"]=s.select.borderWidth})),i.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&c(this.points,function(t){var i=t.graphic;i&&i[t.y&&t.visible?"show":"hide"]()})}),t.wrap(t.seriesTypes.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var i=this,e=i.chart,s=e.options.chart.options3d;c(i.data,function(t){var i=t.shapeArgs,e=i.r,r=(i.alpha||s.alpha)*m,a=(i.beta||s.beta)*m,o=(i.start+i.end)/2,n=t.labelPos,h=[0,2,4],p=-e*(1-g(r))*z(o),l=e*(g(a)-1)*g(o);c(h,function(t){n[t]+=l,n[t+1]+=p})})}t.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),t.wrap(t.seriesTypes.pie.prototype,"animate",function(i){if(this.chart.is3d()){var e,s=arguments,r=s[1],a=this.options.animation,o=this.center,n=this.group,h=this.markerGroup;t.svg&&(!0===a&&(a={}),r?(n.oldtranslateX=n.translateX,n.oldtranslateY=n.translateY,e={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},n.attr(e),h&&(h.attrSetters=n.attrSetters,h.attr(e))):(e={translateX:n.oldtranslateX,translateY:n.oldtranslateY,scaleX:1,scaleY:1},n.animate(e,a),h&&h.animate(e,a),this.animate=null))}else i.apply(this,[].slice.call(arguments,1))}),t.wrap(t.seriesTypes.scatter.prototype,"translate",function(i){if(i.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var e,s,r,a,o,n=this,h=n.chart,p=t.pick(n.zAxis,h.options.zAxis[0]),c=[];for(o=0;o<n.data.length;o++)e=n.data[o],a=p.isLog&&p.val2lin?p.val2lin(e.z):e.z,e.plotZ=p.translate(a),e.isInside=!!e.isInside&&(a>=p.min&&a<=p.max),c.push({x:e.plotX,y:e.plotY,z:e.plotZ});for(s=v(c,h,!0),o=0;o<n.data.length;o++)e=n.data[o],r=s[o],e.plotXold=e.plotX,e.plotYold=e.plotY,e.plotZold=e.plotZ,e.plotX=r.x,e.plotY=r.y,e.plotZ=r.z}}),t.wrap(t.seriesTypes.scatter.prototype,"init",function(t,i,e){i.is3d()&&(this.axisTypes=["xAxis","yAxis","zAxis"],this.pointArrayMap=["x","y","z"],this.parallelArrays=["x","y","z"],this.directTouch=!0);var s=t.apply(this,[i,e]);if(this.chart.is3d()){var r="x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>";this.userOptions.tooltip?this.tooltipOptions.pointFormat=this.userOptions.tooltip.pointFormat||r:this.tooltipOptions.pointFormat=r}return s}),t.VMLRenderer&&(t.setOptions({animate:!1}),t.VMLRenderer.prototype.cuboid=t.SVGRenderer.prototype.cuboid,t.VMLRenderer.prototype.cuboidPath=t.SVGRenderer.prototype.cuboidPath,t.VMLRenderer.prototype.toLinePath=t.SVGRenderer.prototype.toLinePath,t.VMLRenderer.prototype.createElement3D=t.SVGRenderer.prototype.createElement3D,t.VMLRenderer.prototype.arc3d=function(i){var e=t.SVGRenderer.prototype.arc3d.call(this,i);return e.css({zIndex:e.zIndex}),e},t.VMLRenderer.prototype.arc3dPath=t.SVGRenderer.prototype.arc3dPath,t.wrap(t.Axis.prototype,"render",function(t){t.apply(this,[].slice.call(arguments,1)),this.sideFrame&&(this.sideFrame.css({zIndex:0}),this.sideFrame.front.attr({fill:this.sideFrame.color})),this.bottomFrame&&(this.bottomFrame.css({zIndex:1}),this.bottomFrame.front.attr({fill:this.bottomFrame.color})),this.backFrame&&(this.backFrame.css({zIndex:0}),this.backFrame.front.attr({fill:this.backFrame.color}))}))});